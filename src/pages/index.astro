---
import Form, { FormGroup } from "@astro-reactive/form";
import { Validators } from "@astro-reactive/validator";
import { extract } from "@extractus/article-extractor";
import { getParams, isURL } from "../utils";
import AddressBar from "../components/address-bar.astro";
import Post from "../components/post.astro";
import Layout from "../layouts/layout.astro";

const params = getParams(Astro.url);
const url: string = params?.url || "";
let article;
try {
  article = isURL(url) && (await extract(url));
} catch {
  article = {
    title: "Something is not right",
    content: "The articl extractor did not get any result",
  };
}
---

<Layout title={article?.title}>
  <AddressBar url={url} />
  <Post article={article} />
</Layout>
