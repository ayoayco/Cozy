---
import Form, { FormGroup } from "@astro-reactive/form";
import { Validators } from "@astro-reactive/validator";
import getParams from "../utils/get-params";
import { extract } from "@extractus/article-extractor";
import Article from "../components/article.astro";

const params = getParams(Astro.url);
const url = params?.url;
const article = await extract(url);

const form = new FormGroup([
  {
    type: "text",
    name: "url",
    value: url || "",
    placeholder: "Put the URL here",
    validators: [Validators.required, Validators.minLength(11)],
  },
]);
---

<Form
  formGroups={form}
  showValidationHints
  submitControl={{
    type: "submit",
    name: "submit",
    value: "Get cozy!",
  }}
/>

<Article article={article} />
